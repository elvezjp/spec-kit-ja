# 機能仕様: [FEATURE NAME]

**ブランチ**: `[###-feature-name]`  
**作成日**: [DATE]  
**ステータス**: Draft  
**入力**: ユーザー記述: "$ARGUMENTS"

## 実行フロー (main)
```
1. 入力からユーザー記述を解析
   → 空なら: ERROR "No feature description provided"
2. 説明から主要な概念を抽出
   → 役割（actors）、行為（actions）、データ、制約を特定
3. 不明点ごとに:
   → [NEEDS CLARIFICATION: specific question] でマーク
4. 「ユーザーシナリオ＆テスト」セクションを埋める
   → 明確なユーザーフローがない場合: ERROR "Cannot determine user scenarios"
5. 機能要件を生成
   → 各要件はテスト可能であること
   → 曖昧な要件にはマークを付ける
6. 主要エンティティを特定（データが関与する場合）
7. レビューチェックリストを実行
   → [NEEDS CLARIFICATION] が残る場合: WARN "Spec has uncertainties"
   → 実装詳細が含まれる場合: ERROR "Remove tech details"
8. 戻り値: SUCCESS（計画に進める仕様）
```

---

## ⚡ クイックガイドライン
- ✅ ユーザーが「何を」「なぜ」必要とするかに集中
- ❌ 実装の「どうやるか」は避ける（技術スタック、API、コード構造は書かない）
- 👥 対象読者はビジネス関係者（開発者向けではない）

### セクション要件
- **必須セクション**: すべての機能で必ず記入
- **任意セクション**: 関連がある場合のみ含める
- 該当しないセクションは完全に削除（"N/A" は残さない）

### AI 生成時の注意
ユーザープロンプトからこの仕様を作成する場合:
1. **すべての曖昧さに印を付ける**: どんな仮定も [NEEDS CLARIFICATION: specific question] を用いる
2. **推測しない**: 例「ログインシステム」とだけある場合、認証方式が不明ならマークする
3. **テスター視点で考える**: 曖昧な要件は「テスト可能で一義的」のチェックに不合格
4. **よく不足する領域**:
   - ユーザー種別と権限
   - データ保持/削除ポリシー
   - 性能目標と規模
   - エラーハンドリングの挙動
   - 外部連携要件
   - セキュリティ/コンプライアンス

---

## ユーザーシナリオ＆テスト *(必須)*

### 主要ユーザーストーリー
[メインのユーザージャーニーを平易に記述]

### 受け入れシナリオ
1. **Given** [初期状態], **When** [操作], **Then** [期待結果]
2. **Given** [初期状態], **When** [操作], **Then** [期待結果]

### エッジケース
- [境界条件] のとき、何が起こるか？
- システムは [エラーシナリオ] をどう扱うか？

## 要件 *(必須)*

### 機能要件
- **FR-001**: System MUST [具体的な能力（例: 「ユーザーがアカウントを作成できる」）]
- **FR-002**: System MUST [具体的な能力（例: 「メールアドレスを検証する」）]  
- **FR-003**: Users MUST be able to [主要な操作（例: 「パスワードをリセットできる」）]
- **FR-004**: System MUST [データ要件（例: 「ユーザー設定を永続化する」）]
- **FR-005**: System MUST [振る舞い（例: 「すべてのセキュリティイベントを記録する」）]

*曖昧な要件のマーク例:*
- **FR-006**: System MUST authenticate users via [NEEDS CLARIFICATION: 認証方式が未指定 - email/password, SSO, OAuth?]
- **FR-007**: System MUST retain user data for [NEEDS CLARIFICATION: 保持期間が未指定]

### 主要エンティティ *(データを扱う機能なら含める)*
- **[Entity 1]**: [何を表すか、実装に触れない主要属性]
- **[Entity 2]**: [何を表すか、他エンティティとの関係]

---

## レビュー & 受け入れチェックリスト
*GATE: main() 実行中に自動チェック*

### コンテンツ品質
- [ ] 実装詳細が含まれていない（言語、フレームワーク、API）
- [ ] ユーザー価値とビジネスニーズに集中している
- [ ] 非技術ステークホルダー向けに書かれている
- [ ] すべての必須セクションが記入されている

### 要件の完全性
- [ ] [NEEDS CLARIFICATION] マーカーが残っていない
- [ ] 要件はテスト可能で一義的である  
- [ ] 成功基準が測定可能である
- [ ] スコープが明確に境界付けられている
- [ ] 依存関係と前提が特定されている

---

## 実行ステータス
*処理中に main() により更新*

- [ ] ユーザー記述を解析
- [ ] 主要概念を抽出
- [ ] 曖昧点にマーク
- [ ] ユーザーシナリオを定義
- [ ] 要件を生成
- [ ] エンティティを特定
- [ ] レビューチェックリストを通過

---

